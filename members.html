<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Members</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      color: white;
      min-height: 100vh;
    }
    body::before {
      content: '';
      position: absolute;
      top:0; left:0;
      width:100%; height:100%;
      background: rgba(0,0,0,0.4);
      z-index: 0;
    }
    aside, .main-content, header, footer {
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body class="flex h-screen">

  <!-- Sidebar -->
  <aside class="w-64 bg-gray-900 bg-opacity-90 text-white flex flex-col">
    <div class="p-4">
      <h2 class="text-xl font-bold">Dashboard</h2>
    </div>
    <nav class="flex-1">
      <ul class="space-y-2 p-3">
        <li><a href="dashboard.html" class="flex items-center p-2 hover:bg-gray-800 rounded"><i class="fas fa-home mr-2"></i> Dashboard</a></li>
        <li><a href="members.html" class="flex items-center p-2 hover:bg-gray-800 rounded bg-gray-800"><i class="fas fa-users mr-2"></i> Members</a></li>
        <li><a href="payments.html" class="flex items-center p-2 hover:bg-gray-800 rounded"><i class="fas fa-credit-card mr-2"></i> Payments</a></li>
        <li><a href="reports.html" class="flex items-center p-2 hover:bg-gray-800 rounded"><i class="fas fa-chart-bar mr-2"></i> Reports</a></li>
        <li><a href="settings.html" class="flex items-center p-2 hover:bg-gray-800 rounded"><i class="fas fa-cog mr-2"></i> Settings</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="main-content flex-1 flex flex-col p-4 space-y-4">

    <!-- Header -->
    <header class="bg-black bg-opacity-60 p-4 flex justify-between items-center rounded-lg shadow">
      <h1 class="text-lg font-semibold">Members</h1>
      <a href="index.html" class="text-red-400 hover:text-red-600">Logout</a>
    </header>
<!-- Search -->
<section class="bg-black bg-opacity-50 p-4 rounded-lg shadow">
  <input id="searchMember" type="text" placeholder="Search member by name..."
    class="p-2 rounded w-full bg-gray-800 border border-gray-700 text-white">
</section>

   <!-- Add Member Form -->
<section class="bg-black bg-opacity-50 p-4 rounded-lg shadow">
  <h2 class="text-xl font-bold mb-2">Add Member</h2>
  <form id="addMemberForm" class="grid grid-cols-1 md:grid-cols-5 gap-2 items-end">
    <input type="text" id="memberNo" placeholder="Number/ID" class="p-2 rounded bg-gray-800 border border-gray-700" required>
    <input type="text" id="memberName" placeholder="Name" class="p-2 rounded bg-gray-800 border border-gray-700" required>
    <input type="date" id="memberDate" class="p-2 rounded bg-gray-800 border border-gray-700" required>
    <input type="text" id="memberDesc" placeholder="Description" class="p-2 rounded bg-gray-800 border border-gray-700" required>
    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded">Add</button>
  </form>
</section>

<!-- Members Table -->
<section class="bg-black bg-opacity-50 p-4 rounded-lg shadow overflow-auto">
  <table class="w-full table-auto text-white">
    <thead>
      <tr class="border-b border-gray-600">
        <th class="p-2 text-left">No</th>
        <th class="p-2 text-left">Name</th>
        <th class="p-2 text-left">Date</th>
        <th class="p-2 text-left">Description</th>
        <th class="p-2">Actions</th>
      </tr>
    </thead>
    <tbody id="membersTableBody">
      <!-- Members will be displayed here -->
    </tbody>
  </table>
</section>

<script>
  let members = JSON.parse(localStorage.getItem('members')) || [];
  const membersTableBody = document.getElementById('membersTableBody');
  const addMemberForm = document.getElementById('addMemberForm');

  function displayMembers() {
    membersTableBody.innerHTML = '';
    members.forEach((member, index) => {
      const tr = document.createElement('tr');
      tr.classList.add('border-b', 'border-gray-600');
      tr.innerHTML = `
        <td class="p-2" contenteditable="false">${member.no}</td>
        <td class="p-2" contenteditable="false">${member.name}</td>
        <td class="p-2" contenteditable="false">${member.date}</td>
        <td class="p-2" contenteditable="false">${member.desc}</td>
        <td class="p-2 flex gap-2 justify-center">
          <button class="bg-yellow-500 hover:bg-yellow-600 text-black px-2 rounded editBtn">Edit</button>
          <button class="bg-green-500 hover:bg-green-600 text-white px-2 rounded saveBtn hidden">Save</button>
          <button class="bg-gray-500 hover:bg-gray-600 text-white px-2 rounded cancelBtn hidden">Cancel</button>
          <button class="bg-red-600 hover:bg-red-700 text-white px-2 rounded deleteBtn">Delete</button>
        </td>
      `;
      membersTableBody.appendChild(tr);

      const cells = tr.querySelectorAll("td[contenteditable]");
      const editBtn = tr.querySelector(".editBtn");
      const saveBtn = tr.querySelector(".saveBtn");
      const cancelBtn = tr.querySelector(".cancelBtn");
      const deleteBtn = tr.querySelector(".deleteBtn");

      let oldValues = [];

      editBtn.addEventListener("click", () => {
        oldValues = [...cells].map(cell => cell.textContent);
        cells.forEach(cell => {
          cell.contentEditable = "true";
          cell.classList.add("bg-gray-700");
        });
        editBtn.classList.add("hidden");
        saveBtn.classList.remove("hidden");
        cancelBtn.classList.remove("hidden");
      });

      saveBtn.addEventListener("click", () => {
        cells.forEach(cell => {
          cell.contentEditable = "false";
          cell.classList.remove("bg-gray-700");
        });
        members[index] = {
          no: tr.children[0].textContent,
          name: tr.children[1].textContent,
          date: tr.children[2].textContent,
          desc: tr.children[3].textContent
        };
        localStorage.setItem('members', JSON.stringify(members));
        editBtn.classList.remove("hidden");
        saveBtn.classList.add("hidden");
        cancelBtn.classList.add("hidden");
      });

      cancelBtn.addEventListener("click", () => {
        cells.forEach((cell, i) => {
          cell.textContent = oldValues[i];
          cell.contentEditable = "false";
          cell.classList.remove("bg-gray-700");
        });
        editBtn.classList.remove("hidden");
        saveBtn.classList.add("hidden");
        cancelBtn.classList.add("hidden");
      });

      deleteBtn.addEventListener("click", () => {
        members.splice(index, 1);
        localStorage.setItem('members', JSON.stringify(members));
        displayMembers();
      });
    });
  }

  addMemberForm.addEventListener('submit', e => {
    e.preventDefault();
    const no = document.getElementById('memberNo').value.trim();
    const name = document.getElementById('memberName').value.trim();
    const date = document.getElementById('memberDate').value;
    const desc = document.getElementById('memberDesc').value.trim();
    members.push({ no, name, date, desc });
    localStorage.setItem('members', JSON.stringify(members));
    addMemberForm.reset();
    displayMembers();
  });


      


  displayMembers();
</script>


</body>
</html>
